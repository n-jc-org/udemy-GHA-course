name: Caching and Artefacts
on: [workflow_dispatch]
jobs:
  use-axios:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v3

        # use a standard action to cache npm dependencies 
        - name: cache node modules
          id: cache-dependencies
          uses: actions/cache@v3
          with:
            path: ~/.npm
            key: ${{ runner.os }}-npm-cache-${{ hashFiles('**/package-lock.json') }}
            restore-keys: |
              ${{ runner.os }}-npm-cache-

        # display the cache output 
        - name: Display cache output
          run: echo '${{ toJson(steps.cache-dependencies.outputs) }}'

        # install npm dependencies 
        - name: Install dependencies
          run: npm install
        - name: Use Axios
          uses: actions/github-script@v6
          with:
            script: |
              const axios = require('axios');
              const res = await axios('https://icanhazdadjoke.com/', { headers: { Accept: 'text/plain' } })
              console.log(res.data)